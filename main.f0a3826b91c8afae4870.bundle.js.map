{"version":3,"file":"main.f0a3826b91c8afae4870.bundle.js","sources":["webpack:///./src/job-table.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\n\nimport { Tooltip, Avatar } from '@material-ui/core'\nimport DataTable from 'mui-datatables'\nimport lscache from 'lscache'\n\n\nconst API = 'https://woozyking-mff-ds.glitch.me/jobs'\n\nconst renderJSON = (value) => (<pre>{JSON.stringify(value, null, 2)}</pre>)\n\nconst renderAvatar = (value, image) => {\n  if (image === '-') {\n    return value\n  }\n  return (\n    <Tooltip title={value} aria-label={value} placement='right'>\n      <Avatar alt={value} src={image} />\n    </Tooltip>\n  )\n}\n\nconst useJobs = () => {\n  const [jobs, setJobs] = useState([])\n  useEffect(() => {\n    if (!jobs.length) {\n      const cached = lscache.get(API)\n      if (cached) {\n        setJobs(cached)\n      } else {\n        fetch(API).then(r => r.json()).then(jobs => {\n          lscache.set(API, jobs, 60)\n          setJobs(jobs)\n        }).catch(console.error) // TODO: add snackbar\n      }\n    }\n  }, [jobs.length])\n  return jobs\n}\n\nconst JobTable = () => {\n  const jobs = useJobs()\n\n  return (\n    <DataTable\n      title='Jobs'\n      data={jobs}\n      columns={[\n        {\n          name: 'job-class-icon',\n          label: 'Icon',\n          options: {\n            display: 'excluded',\n          },\n        },\n        {\n          name: 'job-thumbnail',\n          label: 'Thumbnail',\n          options: {\n            display: 'excluded',\n          },\n        },\n        {\n          name: 'job-type',\n          label: 'Type',\n          options: {\n            customBodyRender: (value, { rowData: [icon] }) => renderAvatar(value, icon),\n          },\n        },\n        {\n          name: 'job-name',\n          label: 'Name',\n          options: {\n            customBodyRender: (value, { rowData: [_, thumbnail] }) => renderAvatar(value, thumbnail),\n          },\n        },\n        {\n          name: 'job-stats',\n          label: 'Stats',\n          options: {\n            customBodyRender: renderJSON,\n            display: false,\n          },\n        },\n        {\n          name: 'job-orbs',\n          label: 'Orbs',\n          options: {\n            customBodyRender: renderJSON,\n            display: false,\n          },\n        },\n        {\n          name: 'job-mp-role',\n          label: 'MP Role',\n        },\n        {\n          name: 'job-autoes',\n          label: 'Autoes',\n          options: {\n            customBodyRender: renderJSON,\n            display: false,\n          },\n        },\n        {\n          name: 'job-ultimate',\n          label: 'Ultimate',\n          options: {\n            customBodyRender: renderJSON,\n            display: false,\n          },\n        },\n      ]}\n    />\n  )\n}\n\nexport default JobTable\n"],"mappings":"AAOA","sourceRoot":""}